<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>The Dining Philosophers Problem &#8211; Ace Hsieh</title>
<meta name="description" content="Life is too short for long-term grudges.">
<meta name="keywords" content="Operation System, Story">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@tsezihin">
<meta name="twitter:creator" content="@tsezihin">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="The Dining Philosophers Problem">
<meta property="og:description" content="Life is too short for long-term grudges.">
<meta property="og:url" content="http://localhost:4000/operation%20system/The-Dining-Philosophers-Problem/">
<meta property="og:site_name" content="Ace Hsieh">
<meta property="og:image" content="http://localhost:4000/images/images/logo.png">





<link rel="canonical" href="http://localhost:4000/operation%20system/The-Dining-Philosophers-Problem/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Ace Hsieh Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">




</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="http://localhost:4000/">
          
            <img class="logo" src="http://localhost:4000/images/logo.png" alt="Ace Hsieh">
          
          <a href="http://localhost:4000/" class="title"> Ace Hsieh</a>
        </a>
      </li>
      
        
        

        
            
                <li class="header-item "><a href="http://localhost:4000/about"><h3>About</h3></a></li>
            
        
      
        
        

        
          <li class="header-item "><a href="http://localhost:4000/categories"><h3>Categories</h3></a>
            <ul class="header-submenu">
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#Algorithm">Algorithm</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#Blockchain">Blockchain</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#Machine Learning">Machine Learning</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#NEU">NEU</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#Operation System">Operation System</a></li>
              
                
                  <li class="sub-item"><a href="http://localhost:4000/categories/#SYSU">SYSU</a></li>
              
            </ul>
          </li>
        
      
        
        

        
            
                <li class="header-item "><a href="http://localhost:4000/tags"><h3>Tags</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="http://localhost:4000/"><h3>Home</h3></a></li>
            
        
      
      <li class="header-item"><a href="http://localhost:4000/search"><h3><i class="fa fa-search"></i></h3></a></li>
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>The Dining Philosophers Problem</h1>
      
        <h2><span class="entry-date date published updated"><time datetime="2017-02-22T00:00:00+08:00">February 22, 2017</time></span></h2>
      

      
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~3 minutes
        </p><!-- /.entry-reading-time -->
      
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="http://localhost:4000/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="http://localhost:4000/tags"><h3>Tags</h3></a></li>
      
    
      
        <li><a href="http://localhost:4000/categories"><h3>Categories</h3></a>
          <ul>
            
              
                <li><a href="http://localhost:4000/categories/#Algorithm">Algorithm</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#Blockchain">Blockchain</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#Machine Learning">Machine Learning</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#NEU">NEU</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#Operation System">Operation System</a></li>
            
              
                <li><a href="http://localhost:4000/categories/#SYSU">SYSU</a></li>
            
          </ul>
        </li>
      
    
      
        <li><a href="http://localhost:4000/about"><h3>About</h3></a></li>
      
    
  </ul>
</nav>


  <a href="https://twitter.com/tsezihin" class="btn btn-info button-twitter" data-show-count="false" data-size="large"><i class="fa fa-twitter"></i> <span> | Follow @tsezihin</span></a>



<div id="main" role="main">
  <article class="hentry">
    <div class="entry-content">
        
      <h1 class="post-title entry-title">The Dining Philosophers Problem</h1>
      <p>The dining philosophers problem is a classic concurrency problem dealing with synchronization. Gather round and I’ll tell you how it goes:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-024da0df8d3a2a53.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>Five philosophers are sitting at a table.</p>

<p>Now, each philosopher has two forks: left fork and right fork. If a Swanson gets two forks, he can eat!</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-fabdc78cc3ec700f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>If he only has one fork he can’t eat :(</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-a0769cdd0b21abef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>So the Swansons need to learn to share forks:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-8c254f48a1d2d11a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>The dining philosophers problem is: <strong>how do you make sure every Swanson gets to eat?</strong></p>

<h1 id="deadlock">Deadlock</h1>
<p>Don’t get me wrong, I love Swansons. But damn they are competitive. As soon as I told them to start eating, every Swanson grabbed a fork:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-1ef33bdb152d0b40.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>And then they waited for someone to give up their fork so they could eat. But of course, “a Swanson never gives up his fork!” sigh So they waited forever and eventually died in their stupid log cabin. Great job, guys. When all Swansons are stuck, that is called <strong><em>deadlock</em></strong>.</p>

<h1 id="livelock">Livelock</h1>
<p>Alright Rons. I’m going to set a time limit. If you have been waiting for a fork for 10 minutes, you need to give up your fork. And wait 10 minutes before you try to pick up a fork again. By then, someone else will be done and you can use his fork:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-e0924509605ec4b1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>Now you can’t have deadlock. But if all Swansons do these actions at the exact same time, you now have livelock:
Yay! Nothing can go wrong now! Right?
30 minutes later
So let me get this straight…</p>
<ol>
  <li>You all picked up your fork at the exact same time.</li>
  <li>10 minutes later, you all put down your forks.</li>
  <li>10 minutes later, you just picked up your forks again! <a href="https://en.wikipedia.org/wiki/Deadlock#Livelock">This will go on forever</a>!</li>
</ol>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-00258cf8f57753a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>What do, nephew? You Swansons will <a href="https://en.wikipedia.org/wiki/Starvation_(computer_science)">starve</a>!</p>
<h1 id="resource-hierarchy">Resource Hierarchy</h1>
<p>Let’s number the forks:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-19e312112693e096.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>Now Rons, the rule is, if you’re using two forks, you need to pick up the lower numbered fork first.
Now let’s see what happens:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-62d3ee091d7e94a9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<ul>
  <li>Ron #1 picks up fork #1</li>
  <li>Ron #2 picks up fork #2</li>
  <li>Ron #3 picks up fork #3</li>
  <li>Ron #4 picks up fork #4</li>
  <li>Ron #5 can’t pick up fork #5! Because he will need two forks and he needs to pick up the lower numbered fork first!</li>
</ul>

<p>So fork #5 goes to Ron #4 – no deadlock!</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-810ef2db27079485.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>Cool, resource hierarchy avoids deadlocks! But it is slow. Suppose you have forks #3 and #5. Then you decide you need fork #2. Well forks #3 and #5 are larger numbers. So you’ll have to:</p>
<ol>
  <li>put down fork #5</li>
  <li>put down fork #3 (the order you put these down in doesn’t matter)</li>
  <li>pick up fork #2</li>
  <li>pick up fork #3</li>
  <li>pick up fork #5</li>
</ol>

<p>Ugh, what a waste of time!</p>

<h1 id="semaphores">Semaphores</h1>
<p>Here’s an easier solution: if there are 5 forks, only 4 Swansons should be allowed at the table. We’ll have a waiter control access to the table:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-31ab49e3cc51b386.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>If there are &lt; 4 Swansons on the table, you can join. Otherwise you have to wait until there are &lt; 4 Swansons!
Ok, this prevents deadlock, but you can still have starvation…a Swanson could wait forever and never get to sit at the table. Unless he kills off one of the other Swansons.</p>

<h1 id="chandymisra">Chandy/Misra</h1>
<p>Now I’ve got it. All forks can be clean or dirty: 
<img src="http://upload-images.jianshu.io/upload_images/1218580-6ec56a2ebfca76e4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" />
Initially all forks are dirty:</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1218580-ba90d9469324915c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>Now:</p>
<ol>
  <li>Number all the Swansons 
<img src="http://upload-images.jianshu.io/upload_images/1218580-bc1639412b7ecca6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></li>
  <li>For every pair of Swansons, give the fork to the guy with the smaller id:
<img src="http://upload-images.jianshu.io/upload_images/1218580-ab916d05d77c37c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></li>
  <li>When a Swanson needs a fork, he asks his neighbor for his fork. When his neighbor gets the request:
    <ul>
      <li>if his fork is clean, he keeps it.</li>
      <li>if his fork is dirty, he cleans it and sends it over.</li>
    </ul>
  </li>
</ol>

<p>When a Swanson has eaten, all his forks become dirty.
Bam! Starvation problem solved! The guys who are starving get a higher priority than the guys who are eating!</p>

<p><strong>Q.</strong> Swansons 3 and 4 both only have one fork. Suppose Swanson #3 requests a second fork from Swanson #4. Will Swanson #4 give up his fork even though he didn’t eat?
<strong>A.</strong> YES. According to the rules of Chandy-Misra, Swanson #4 would have to clean his fork and send it over to Swanson #3.</p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://localhost:4000/tags#Operation System" title="Pages tagged Operation System" class="tag"><span class="term">Operation System</span></a><a href="http://localhost:4000/tags#Story" title="Pages tagged Story" class="tag"><span class="term">Story</span></a></span>
        
        <span class="author vcard"><span class="fn">Ace Hsieh</span></span>
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/operation%20system/The-Dining-Philosophers-Problem/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://localhost:4000/operation%20system/The-Dining-Philosophers-Problem/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=http://localhost:4000/operation%20system/The-Dining-Philosophers-Problem/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->

      </footer>
    </div><!-- /.entry-content -->
    <div class="read-more">
  <div class="read-more-header">
    <a href="http://zihin.top" class="read-more-btn">About the Author</a>
  </div><!-- /.read-more-header -->
  <div class="read-more-content author-info">
    <h3>Ace Hsieh</h3>
    <div class="author-container">
      <img class="author-img" src="http://localhost:4000/images/avatar.jpg" alt="Ace Hsieh" />
      <div class="author-bio">Life is too short for long-term grudges.</div>
    </div>
    <div class="author-share">
      <ul class="list-inline social-buttons">
        
          <li><a href="https://github.com/zihin" target="_blank"><i class="fa fa-github fa-fw"></i></a></li>
        
          <li><a href="http://www.linkedin.com/in/tsezihin/" target="_blank"><i class="fa fa-linkedin fa-fw"></i></a></li>
        
      </ul>
      
        <a aria-label="Follow @zihin on GitHub" data-style="mega" href="https://github.com/zihin" class="github-button">Follow @zihin</a>
      
      <br>
      
        <a href="https://twitter.com/tsezihin" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @tsezihin</a>
      
    </div>
  </div>
</div>

    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="http://localhost:4000/blockchain/About-Ethereum-Solidity-Hyperledger/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="http://localhost:4000/blockchain/About-Ethereum-Solidity-Hyperledger/" title="Resources about blockchain, Ethereum .etc.">Resources about blockchain, Ethereum .etc.</a></h3>
      <p>BlockchainProof-of-Stake ResourcesBitcoinBitcoin Developer Documentation: Guides, examples and references about blockchain, transactions,...&hellip; <a href="http://localhost:4000/blockchain/About-Ethereum-Solidity-Hyperledger/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="http://localhost:4000/blockchain/Definition-of-statistic-in-ethstats-net/" title="Definition of statistic in ethstats.net">Definition of statistic in ethstats.net</a></h4>
        <span>Published on February 19, 2017</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="http://localhost:4000/blockchain/Vivid-Explanation-of-blockchain/" title="Vivid Explanation of Blockchain">Vivid Explanation of Blockchain</a></h4>
        <span>Published on February 01, 2017</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="http://localhost:4000/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<!-- Asynchronous Google Analytics snippet -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-86465655-1', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>



    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'http-zihin-top'; // required: replace example with your forum shortname
//        http-zihin-top
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




<script type="text/javascript">
    sharing();
</script>



<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 Ace Hsieh. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
